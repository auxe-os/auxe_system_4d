<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auxe Video</title>
    <style>
      html, body { margin: 0; padding: 0; height: 100%; background:#000; }
      .wrap { height:100%; display:flex; align-items:center; justify-content:center; }
      .player { aspect-ratio: 16 / 9; width: min(100%, 960px); max-height: 90vh; }
      iframe { width: 100%; height: 100%; border: 0; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="player" id="player"></div>
    </div>
    <script>
      // Choose source by query params:
      // - ?src=/path/to/local.mp4  (preferred for full click forwarding)
      // - ?vid=YOUTUBE_ID          (fallback to YouTube embed)
      (function() {
        const player = document.getElementById('player');
        try {
          const params = new URLSearchParams(window.location.search);
          const localSrc = params.get('src');
          const vid = params.get('vid');
          if (localSrc) {
            const v = document.createElement('video');
            v.setAttribute('id', 'localVideo');
            v.setAttribute('src', localSrc);
            v.setAttribute('controls', '');
            v.setAttribute('playsinline', '');
            v.setAttribute('autoplay', '');
            v.setAttribute('muted', '');
            v.setAttribute('loop', '');
            v.style.width = '100%';
            v.style.height = '100%';
            player.innerHTML = '';
            player.appendChild(v);
            return;
          }
          const iframe = document.createElement('iframe');
          iframe.setAttribute('id', 'yt');
          iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
          iframe.setAttribute('allowfullscreen', '');
          const ytId = vid || '495zc7_vGgA';
          const src = `https://www.youtube-nocookie.com/embed/${ytId}?autoplay=1&mute=1&controls=1&playsinline=1&rel=0`;
          iframe.setAttribute('src', src);
          player.innerHTML = '';
          player.appendChild(iframe);
        } catch(e) {
          // no-op
        }
      })();

      // Bridge pointer events to parent so click SFX play in the host
      const fire = (type) => {
        try { window.parent && window.parent.postMessage({ type }, window.parent.origin || '*'); } catch(e) {}
      };
      ['pointerdown','mousedown','touchstart','click'].forEach(t => document.addEventListener(t, () => fire('mousedown'), { passive: true }));
      ['pointerup','mouseup','touchend','click'].forEach(t => document.addEventListener(t, () => fire('mouseup'), { passive: true }));
    </script>
  </body>
  </html>


